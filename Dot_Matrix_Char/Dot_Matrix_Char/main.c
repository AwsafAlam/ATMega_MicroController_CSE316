#include <avr/io.h>
#define F_CPU 1000000UL
#include <util/delay.h>

//int temp[8];

static int CHAR_ARRAY[26][8]={{0, //A
	0b01111111,
	0b11111111,
	0b11001100,
	0b11001100,
	0b11001100,
	0b11111111,
0b01111111},
{0, //B
	0b00111100,
	0b01111110,
	0b11011011,
	0b11011011,
	0b11011011,
	0b11111111,
0b11111111},

{0,0b11000011,0b11000011,0b11000011,0b11000011,0b11100111,0b01111110,0b00111100},//C

{	0,
	0b01111110,
	0b10111101,
	0b11000011,
	0b11000011,
	0b11000011,
	0b11111111,
	0b11111111},//D

{0,
	0b11011011,
	0b11011011,
	0b11011011,
	0b11011011,
	0b11011011,
	0b11111111,
0b11111111},//E

{0,0b11011000,0b11011000,0b11011000,0b11011000,0b11011000,0b11111111,0b11111111},//F

{0b00011111,
	0b11011111,
	0b11011011,
	0b11011011,
	0b11000011,
	0b11000011,
	0b11111111,
0b11111111},//G

{0,0b11111111,0b11111111,0b00011000,0b00011000,0b00011000,0b11111111,0b11111111},//H

{0b11000011,0b11000011,0b11000011,0b11111111,0b11111111,0b11000011,0b11000011,0b11000011},//I

{	0b11000000,
	0b11000000,
	0b11000000,
	0b11111111,
	0b11111111,
	0b11000011,
	0b11001111,
0b11001111},//J

{0,0b11000011,0b11100111,0b01111110,0b00111100,0b00011000,0b11111111,0b11111111},//K

{	0,
	0b00000011,
	0b00000011,
	0b00000011,
	0b00000011,
	0b00000011,
	0b11111111,
	0b11111111},//L

{0b11111111,0b11111111,0b01100000,0b01110000,0b01110000,0b01100000,0b11111111,0b11111111},//M

{0b11111111,0b11111111,0b00011100,0b00111000,0b01110000,0b11100000,0b11111111,0b11111111},//N

{0b01111110,0b11111111,0b11000011,0b11000011,0b11000011,0b11000011,0b11111111,0b01111110},//O

{0,0b01110000,0b11111000,0b11001100,0b11001100,0b11001100,0b11111111,0b11111111},//P

{0b01111110,0b11111111,0b11001111,0b11011111,0b11011011,0b11000011,0b11111111,0b01111110},//Q

{0b01111001,0b11111011,0b11011111,0b11011110,0b11011100,0b11011000,0b11111111,0b11111111},//R

{0b11001110,0b11011111,0b11011011,0b11011011,0b11011011,0b11011011,0b11111011,0b01110011},//S

{0b11000000,0b11000000,0b11000000,0b11111111,0b11111111,0b11000000,0b11000000,0b11000000},//T

{0b11111110,0b11111111,0b00000011,0b00000011,0b00000011,0b00000011,0b11111111,0b11111110},//U

{0b11100000,0b11111100,0b00011110,0b00000011,0b00000011,0b00011110,0b11111100,0b11100000},//V

{0b11111110,0b11111111,0b00000011,0b11111111,0b11111111,0b00000011,0b11111111,0b11111110},//W

{0b01000010,0b11100111,0b01111110,0b00111100,0b00111100,0b01111110,0b11100111,0b01000010},//X

{	0b11111111,
	0b11111111,
	0b00001110,
	0b00011100,
	0b00111000,
	0b01110000,
	0b11111111,
	0b11111111},//z

{
	0b11000011,
	0b11100011,
	0b11110011,
	0b11111011,
	0b11011111,
	0b11001111,
	0b11000111,
	0b11000011}};//characters a,b,c,d,e,f,g,...z binary codecs

void rotate90(int idx)
{
	int b[8] ;
	int n = 8 ;
	for(int i=0 ; i<8 ; i++) b[i] =0 ;
	
	for(int i=0 ; i<8 ;i++)
	{
		for(int j=0 ; j<8 ; j++)
		{
			if( ( CHAR_ARRAY[idx][i]&(1<<j))!=0 ) b[ n-j-1 ] |= (1<<i) ;
		}
	}
	for(int i=0 ; i<8 ; i++) CHAR_ARRAY[idx][i] = b[i]  ;
}

void LeftRotate(int idx)
{
	rotate90(idx) ;
}

void RightRotate(int idx)
{
     rotate90(idx) ;
	 rotate90(idx) ;
	 rotate90(idx) ;
}

void ScrollRight(int idx){
	for(int j = 7 ; j>=1 ; j--){
		
		CHAR_ARRAY[11][j] = CHAR_ARRAY[11][j-1];
		CHAR_ARRAY[11][0] = 0;
		
	}
}

void wrap(int idx)
{	 
	int temp = CHAR_ARRAY[idx][0] ;
	for(int j=1 ; j<=7 ; j++){
		
		 CHAR_ARRAY[idx][j-1] = CHAR_ARRAY[idx][j] ;
	}
	CHAR_ARRAY[idx][7] = temp ;	 
} 

int main(void)

{
	MCUCSR = (1<<JTD);  MCUCSR = (1<<JTD);

	DDRA = 0xFF;//PORTB,C,D are set as output

	DDRC = 0xFF;

	//char PORT[8] = {1,2,4,8,16,32,64,128};//pin values of PORTA
	//CHAR_ARRAY[24][0] = 0x00;
	int hId = 0 ;
	while(1)

	{
			for (int n=0;n<200;n++)//execute 200 times for the eye to catch

			{

				for (int j=0;j<8;j++)
				{
					//int t=j;
					 PORTA = (1<<(j)) ; // ROW ,sets the j'th bit
				 

					PORTC = CHAR_ARRAY[24][j] & 0b01111111;//show  character (COLUMN)
					//temp=(8-(temp+1))%8;
					
					_delay_us(500);


				}
				//PORTA=0x00;//clear screen after show.

			}

		PORTA=0x00;
		//_delay_ms(800);
		wrap(24); hId = (hId+7)%8 ; 

		}
	//	temp=(temp-1+8)%8;

}

